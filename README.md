# ä»“åº“åº“å­˜æ£€æµ‹ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº Node.js å’Œ Playwright çš„æ™ºèƒ½ä»“åº“åº“å­˜æ£€æµ‹ç³»ç»Ÿï¼Œæ”¯æŒå®šæ—¶ä»»åŠ¡ã€ç”¨æˆ·ç®¡ç†å’Œ Web ç•Œé¢ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ” åº“å­˜æ£€æµ‹
- è‡ªåŠ¨åŒ–åº“å­˜æ£€æµ‹ï¼Œæ”¯æŒå¤šä¸ª SKU å’Œåœ°åŒº
- åŸºäº Playwright çš„ç½‘é¡µè‡ªåŠ¨åŒ–
- å®æ—¶ç»“æœå±•ç¤ºå’Œå†å²è®°å½•

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†
- ç”¨æˆ·æ³¨å†Œå’Œç™»å½•ç³»ç»Ÿ
- åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ï¼ˆæ™®é€šç”¨æˆ·ã€ç®¡ç†å‘˜ã€è¶…çº§ç®¡ç†å‘˜ï¼‰
- JWT ä»¤ç‰Œè®¤è¯

### âš™ï¸ é…ç½®ç®¡ç†
- çµæ´»çš„ SKU å’Œåœ°åŒºé…ç½®
- å¯é‡ç”¨çš„æ£€æµ‹é…ç½®
- é…ç½®çš„å¢åˆ æ”¹æŸ¥

### â° å®šæ—¶ä»»åŠ¡
- åŸºäº Cron è¡¨è¾¾å¼çš„å®šæ—¶ä»»åŠ¡
- è‡ªåŠ¨æ‰§è¡Œåº“å­˜æ£€æµ‹
- ä»»åŠ¡çŠ¶æ€ç›‘æ§

### ğŸ“Š ç®¡ç†åå°
- ç›´è§‚çš„ Web ç®¡ç†ç•Œé¢
- å®æ—¶æ•°æ®ç»Ÿè®¡
- ç»“æœæŸ¥çœ‹å’Œåˆ†æ

### ğŸ³ å®¹å™¨åŒ–éƒ¨ç½²
- Docker æ”¯æŒ
- Docker Compose ä¸€é”®éƒ¨ç½²
- ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 18+
- npm æˆ– yarn
- Dockerï¼ˆå¯é€‰ï¼‰

### æœ¬åœ°å®‰è£…

1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd WarehouseDetective
```

2. å®‰è£…ä¾èµ–
```bash
npm install
```

3. å®‰è£…æµè§ˆå™¨
```bash
npm run install-browsers
```

4. å¯åŠ¨æœåŠ¡å™¨
```bash
npm run server
```

5. è®¿é—®åº”ç”¨
- ä¸»é¡µ: http://localhost:3000
- ç®¡ç†åå°: http://localhost:3000/admin
- ç™»å½•é¡µ: http://localhost:3000/login

### Docker éƒ¨ç½²

1. æ„å»ºé•œåƒ
```bash
npm run docker:build
```

2. è¿è¡Œå®¹å™¨
```bash
npm run docker:run
```

æˆ–ä½¿ç”¨ Docker Composeï¼š

```bash
npm run docker:compose
```

## é»˜è®¤è´¦æˆ·

ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºé»˜è®¤è¶…çº§ç®¡ç†å‘˜è´¦æˆ·ï¼š

- **ç”¨æˆ·å**: admin
- **å¯†ç **: admin123

## é¡¹ç›®ç»“æ„

```
WarehouseDetective/
â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ main.js            # åŸå§‹åº“å­˜æ£€æµ‹é€»è¾‘
â”‚   â”œâ”€â”€ app.js             # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ server.js          # Web æœåŠ¡å™¨
â”‚   â”œâ”€â”€ database.js        # æ•°æ®åº“æ“ä½œ
â”‚   â””â”€â”€ auth.js            # è®¤è¯æœåŠ¡
â”œâ”€â”€ public/                # å‰ç«¯æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html         # ä¸»é¡µ
â”‚   â”œâ”€â”€ login.html         # ç™»å½•é¡µ
â”‚   â”œâ”€â”€ admin.html         # ç®¡ç†åå°
â”‚   â””â”€â”€ admin.js           # ç®¡ç†åå°è„šæœ¬
â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ config.json        # ä¸»é…ç½®
â”œâ”€â”€ data/                  # æ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ output/                # è¾“å‡ºç»“æœ
â”œâ”€â”€ tests/                 # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ Dockerfile             # Docker é…ç½®
â”œâ”€â”€ docker-compose.yml     # Docker Compose é…ç½®
â””â”€â”€ package.json           # é¡¹ç›®é…ç½®
```

## API æ¥å£

### è®¤è¯æ¥å£

- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `GET /api/auth/verify` - éªŒè¯ä»¤ç‰Œ

### ç”¨æˆ·ç®¡ç†

- `GET /api/users` - è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆè¶…çº§ç®¡ç†å‘˜ï¼‰
- `GET /api/users/:id` - è·å–ç”¨æˆ·ä¿¡æ¯
- `PUT /api/users/:id` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- `DELETE /api/users/:id` - åˆ é™¤ç”¨æˆ·ï¼ˆè¶…çº§ç®¡ç†å‘˜ï¼‰

### é…ç½®ç®¡ç†

- `GET /api/configs` - è·å–é…ç½®åˆ—è¡¨
- `POST /api/configs` - åˆ›å»ºé…ç½®
- `GET /api/configs/:id` - è·å–é…ç½®è¯¦æƒ…
- `PUT /api/configs/:id` - æ›´æ–°é…ç½®
- `DELETE /api/configs/:id` - åˆ é™¤é…ç½®

### ä»»åŠ¡æ‰§è¡Œ

- `POST /api/tasks/run` - ç«‹å³æ‰§è¡Œä»»åŠ¡
- `GET /api/tasks/status` - è·å–ä»»åŠ¡çŠ¶æ€

### ç»“æœæŸ¥çœ‹

- `GET /api/results` - è·å–ç»“æœåˆ—è¡¨
- `GET /api/results/:id` - è·å–ç»“æœè¯¦æƒ…

### å®šæ—¶ä»»åŠ¡

- `GET /api/schedules` - è·å–å®šæ—¶ä»»åŠ¡åˆ—è¡¨
- `POST /api/schedules` - åˆ›å»ºå®šæ—¶ä»»åŠ¡
- `PUT /api/schedules/:id` - æ›´æ–°å®šæ—¶ä»»åŠ¡
- `DELETE /api/schedules/:id` - åˆ é™¤å®šæ—¶ä»»åŠ¡

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

- `PORT` - æœåŠ¡å™¨ç«¯å£ï¼ˆé»˜è®¤ï¼š3000ï¼‰
- `NODE_ENV` - è¿è¡Œç¯å¢ƒï¼ˆdevelopment/productionï¼‰
- `JWT_SECRET` - JWT å¯†é’¥
- `SESSION_SECRET` - ä¼šè¯å¯†é’¥
- `CORS_ORIGIN` - CORS å…è®¸çš„æº

### é…ç½®æ–‡ä»¶

`config/config.json` åŒ…å«ç½‘ç«™ç™»å½•ä¿¡æ¯å’Œé»˜è®¤æœç´¢é…ç½®ï¼š

```json
{
  "website": {
    "loginUrl": "https://example.com/",
    "username": "your-username",
    "password": "your-password"
  },
  "search": {
    "skus": ["SKU1", "SKU2"],
    "regions": ["åœ°åŒº1", "åœ°åŒº2"]
  },
  "output": {
    "format": "json",
    "filename": "warehouse_results.json"
  },
  "browser": {
    "headless": false,
    "timeout": 30000,
    "viewport": {
      "width": 1280,
      "height": 720
    }
  }
}
```

## å®šæ—¶ä»»åŠ¡

ç³»ç»Ÿæ”¯æŒä½¿ç”¨ Cron è¡¨è¾¾å¼è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼š

- `0 0 * * *` - æ¯å¤©åˆå¤œæ‰§è¡Œ
- `0 */6 * * *` - æ¯6å°æ—¶æ‰§è¡Œ
- `0 0 * * 1` - æ¯å‘¨ä¸€åˆå¤œæ‰§è¡Œ
- `0 0 1 * *` - æ¯æœˆ1å·åˆå¤œæ‰§è¡Œ

## å®‰å…¨ç‰¹æ€§

- JWT ä»¤ç‰Œè®¤è¯
- å¯†ç å“ˆå¸Œå­˜å‚¨
- è¯·æ±‚é¢‘ç‡é™åˆ¶
- CORS ä¿æŠ¤
- Helmet å®‰å…¨å¤´
- åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶

## å¼€å‘

### å¯ç”¨è„šæœ¬

- `npm start` - å¯åŠ¨åŸå§‹æ£€æµ‹è„šæœ¬
- `npm run server` - å¯åŠ¨ Web æœåŠ¡å™¨
- `npm run dev` - å¼€å‘æ¨¡å¼å¯åŠ¨
- `npm test` - è¿è¡Œæµ‹è¯•
- `npm run docker:build` - æ„å»º Docker é•œåƒ
- `npm run docker:compose` - ä½¿ç”¨ Docker Compose å¯åŠ¨

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `src/` ç›®å½•ä¸‹æ·»åŠ æ–°çš„æ¨¡å—
2. åœ¨ `src/server.js` ä¸­æ·»åŠ æ–°çš„è·¯ç”±
3. åœ¨å‰ç«¯é¡µé¢ä¸­æ·»åŠ ç›¸åº”çš„ç•Œé¢
4. æ›´æ–° API æ–‡æ¡£

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æµè§ˆå™¨å¯åŠ¨å¤±è´¥**
   - ç¡®ä¿å·²å®‰è£… Playwright æµè§ˆå™¨ï¼š`npm run install-browsers`
   - æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦æ”¯æŒ Chromium

2. **ç™»å½•å¤±è´¥**
   - æ£€æŸ¥ `config/config.json` ä¸­çš„ç™»å½•å‡­æ®
   - ç¡®è®¤ç›®æ ‡ç½‘ç«™å¯è®¿é—®

3. **ç«¯å£å ç”¨**
   - ä¿®æ”¹ç¯å¢ƒå˜é‡ `PORT` æˆ– `docker-compose.yml` ä¸­çš„ç«¯å£æ˜ å°„

4. **æƒé™é—®é¢˜**
   - ç¡®ä¿åº”ç”¨æœ‰å†™å…¥ `data/` å’Œ `output/` ç›®å½•çš„æƒé™

### æ—¥å¿—æŸ¥çœ‹

- åº”ç”¨æ—¥å¿—ä¼šè¾“å‡ºåˆ°æ§åˆ¶å°
- Docker å®¹å™¨æ—¥å¿—ï¼š`docker logs <container-name>`
- Docker Compose æ—¥å¿—ï¼š`docker-compose logs`

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT License

## æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- åŸºç¡€åº“å­˜æ£€æµ‹åŠŸèƒ½
- Web ç®¡ç†ç•Œé¢
- ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- å®šæ—¶ä»»åŠ¡æ”¯æŒ
- Docker å®¹å™¨åŒ–
